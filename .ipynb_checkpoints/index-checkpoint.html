<!DOCTYPE html>
<html>
    <center> 
        <head>
            
            <script src="https://cdn.jsdelivr.net/npm/vega@5"></script>
            <script src="https://cdn.jsdelivr.net/npm/vega-lite@5"></script>
            <script src="https://cdn.jsdelivr.net/npm/vega-embed@6"></script>
            <h1> Data Visualization </h1>
            <h2> Assignment 3 : The Square Footage Battle</h2>
            <h3><i>Mayur Sridhar Sharma</i></h3>
    
        </head>
    </center>
    <br>
    
    <body>
        <p> 
            The following visualization is about the most square footage owned/acquired till date by an agency. A simple sorted  bar plot shows the median sqaure footage v/s the corresponding agency name.  
    
        </p>
    
    <br><br>
    <center>   
    <div id="vis"> </div>
    
    <script type="text/javascript">
      var yourVlSpec = {
          
          "$schema": "https://vega.github.io/schema/vega-lite/v5.json",
          "description": "A simple bar chart with embedded data.",
          "data": {"url": "https://raw.githubusercontent.com/Mayur-Sharma12/Mayur-Sharma12.github.io/master/building_inventory2.csv", "format": {"type": "csv"}},
          "mark": "bar", 
          "title": "Comparing Agency & Median Square Footage",
          "selection": {
                        "highlight": {"type": "single", "empty": "none", "on": "mouseover"},
                        "select": {"type": "multi"}
                        },
          "mark": {
                        "type": "bar",
                        "fill": "#4C78A8",
                        "stroke": "black",
                        "cursor": "pointer"
                  },
          "encoding": {
              
                        "x": {"field": "Agency Name", "type": "nominal", "sort":"-y", "axis": {"labelAngle": 45}},
                        "y": {"aggregate" : "median", "field": "Square Footage", "type": "quantitative","titleFontSize":"30"},
                        "fillOpacity": {"condition": {"selection": "select", "value": 1}, "value": 0.3},
                        "strokeWidth": {"condition": [
                                                     {
                                                      "test": {
                                                                "and": [{"selection": "select"},"length(data(\"select_store\"))"]
                                                               },
                                                      "value": 2
                                                      },
                                                      {"selection": "highlight", "value": 1}
                                                      ],
                                        "value": 0
                                       },
              
                        "tooltip": [
                                      {"field":"Agency Name", "type": "nominal", "title":"Agency"},
                                      {"aggregate" : "median","field": "Square Footage", "type": "quantitative", "title":"Value"}
                                   
                                    ]
                      }
      };
          
      vegaEmbed('#vis', yourVlSpec);
    </script>
    </center>
        
        <br><br>
        <p>There are some level of interactivity. Upon hovering over the graph, detailed information about the specific bar pops up. On clicking the a bar, it gets highlighted.</p>
    </body>
    
    
    <style>
        h3 {color:#C2C0C0}
    </style>
    
    
</html>